const exportSvgLink=document.querySelector(".link-download-svg"),exportPngLink=document.querySelector(".link-download-png");function getDiagramSvgBase64(){var e=document.getElementById("diagram").children[0],n=(new XMLSerializer).serializeToString(e);return btoa(encodeURIComponent(n).replace(/%([0-9A-F]{2})/g,((e,n)=>String.fromCharCode("0x"+n))))}function disableExportButtons(){exportSvgLink.classList.add("disabled"),exportPngLink.classList.add("disabled")}function enableExportButtons(){exportSvgLink.classList.remove("disabled"),exportPngLink.classList.remove("disabled")}try{exportSvgLink.onclick=()=>{if(exportSvgLink.classList.contains("disabled"))return;disableExportButtons();const e=getDiagramSvgBase64();null==window.vscode&&(window.vscode=acquireVsCodeApi()),window.vscode.postMessage({command:"export-svg",data:e})},exportPngLink.onclick=()=>{if(exportPngLink.classList.contains("disabled"))return;disableExportButtons();const e=getDiagramSvgBase64();null==window.vscode&&(window.vscode=acquireVsCodeApi()),window.vscode.postMessage({command:"export-png",data:e})},window.addEventListener("message",(e=>{if(null!=e&&null!=e.data&&null!=e.data.command)switch(e.data.command){case"set-source":try{document.getElementById("diagram").innerHTML=null,Diagram.parse(e.data.source).drawSVG("diagram",{theme:window.diagramStyle})}catch(e){document.getElementById("diagram").innerHTML="<code>"+e+"</code>"}break;case"export-done":enableExportButtons()}}))}catch(e){document.getElementById("diagram").innerHTML="<code>"+e+"</code>"}