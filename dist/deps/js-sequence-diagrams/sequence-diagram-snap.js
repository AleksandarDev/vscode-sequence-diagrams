/*! For license information please see sequence-diagram-snap.js.LICENSE.txt */
!function(){"use strict";function t(){this.title=void 0,this.actors=[],this.signals=[]}t.prototype.getActor=function(e,i){var n;e=e.trim();var s=this.actors;for(n in s)if(s[n].alias==e)return s[n];return n=s.push(new t.Actor(e,i||e,s.length)),s[n-1]},t.prototype.getActorWithAlias=function(t){t=t.trim();var e,i,n=/([\s\S]+) as (\S+)$/im.exec(t);return n?(i=n[1].trim(),e=n[2].trim()):i=e=t,this.getActor(e,i)},t.prototype.setTitle=function(t){this.title=t},t.prototype.addSignal=function(t){this.signals.push(t)},t.Actor=function(t,e,i){this.alias=t,this.name=e,this.index=i},t.Signal=function(t,e,i,n){this.type="Signal",this.actorA=t,this.actorB=i,this.linetype=3&e,this.arrowtype=e>>2&3,this.message=n},t.Signal.prototype.isSelf=function(){return this.actorA.index==this.actorB.index},t.Note=function(t,e,i){if(this.type="Note",this.actor=t,this.placement=e,this.message=i,this.hasManyActors()&&t[0]==t[1])throw new Error("Note should be over two different actors")},t.Note.prototype.hasManyActors=function(){return _.isArray(this.actor)},t.unescape=function(t){return t.trim().replace(/^"(.*)"$/m,"$1").replace(/\\n/gm,"\n")},t.LINETYPE={SOLID:0,DOTTED:1},t.ARROWTYPE={FILLED:0,OPEN:1},t.PLACEMENT={LEFTOF:0,RIGHTOF:1,OVER:2},"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"==typeof"test".__proto__?function(t){return t.__proto__}:function(t){return t.constructor.prototype});var e=function(){function e(){this.yy={}}var i=function(t,e,i,n){for(i=i||{},n=t.length;n--;i[t[n]]=e);return i},n=[5,8,9,13,15,24],s=[1,13],r=[1,17],a=[24,29,30],o={trace:function(){},yy:{},symbols_:{error:2,start:3,document:4,EOF:5,line:6,statement:7,NL:8,participant:9,actor_alias:10,signal:11,note_statement:12,title:13,message:14,note:15,placement:16,actor:17,over:18,actor_pair:19,",":20,left_of:21,right_of:22,signaltype:23,ACTOR:24,linetype:25,arrowtype:26,LINE:27,DOTLINE:28,ARROW:29,OPENARROW:30,MESSAGE:31,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",8:"NL",9:"participant",13:"title",15:"note",18:"over",20:",",21:"left_of",22:"right_of",24:"ACTOR",27:"LINE",28:"DOTLINE",29:"ARROW",30:"OPENARROW",31:"MESSAGE"},productions_:[0,[3,2],[4,0],[4,2],[6,1],[6,1],[7,2],[7,1],[7,1],[7,2],[12,4],[12,4],[19,1],[19,3],[16,1],[16,1],[11,4],[17,1],[10,1],[23,2],[23,1],[25,1],[25,1],[26,1],[26,1],[14,1]],performAction:function(e,i,n,s,r,a,o){var h=a.length-1;switch(r){case 1:return s.parser.yy;case 4:break;case 6:a[h];break;case 7:case 8:s.parser.yy.addSignal(a[h]);break;case 9:s.parser.yy.setTitle(a[h]);break;case 10:this.$=new t.Note(a[h-1],a[h-2],a[h]);break;case 11:this.$=new t.Note(a[h-1],t.PLACEMENT.OVER,a[h]);break;case 12:case 20:this.$=a[h];break;case 13:this.$=[a[h-2],a[h]];break;case 14:this.$=t.PLACEMENT.LEFTOF;break;case 15:this.$=t.PLACEMENT.RIGHTOF;break;case 16:this.$=new t.Signal(a[h-3],a[h-2],a[h-1],a[h]);break;case 17:this.$=s.parser.yy.getActor(t.unescape(a[h]));break;case 18:this.$=s.parser.yy.getActorWithAlias(t.unescape(a[h]));break;case 19:this.$=a[h-1]|a[h]<<2;break;case 21:this.$=t.LINETYPE.SOLID;break;case 22:this.$=t.LINETYPE.DOTTED;break;case 23:this.$=t.ARROWTYPE.FILLED;break;case 24:this.$=t.ARROWTYPE.OPEN;break;case 25:this.$=t.unescape(a[h].substring(1))}},table:[i(n,[2,2],{3:1,4:2}),{1:[3]},{5:[1,3],6:4,7:5,8:[1,6],9:[1,7],11:8,12:9,13:[1,10],15:[1,12],17:11,24:s},{1:[2,1]},i(n,[2,3]),i(n,[2,4]),i(n,[2,5]),{10:14,24:[1,15]},i(n,[2,7]),i(n,[2,8]),{14:16,31:r},{23:18,25:19,27:[1,20],28:[1,21]},{16:22,18:[1,23],21:[1,24],22:[1,25]},i([20,27,28,31],[2,17]),i(n,[2,6]),i(n,[2,18]),i(n,[2,9]),i(n,[2,25]),{17:26,24:s},{24:[2,20],26:27,29:[1,28],30:[1,29]},i(a,[2,21]),i(a,[2,22]),{17:30,24:s},{17:32,19:31,24:s},{24:[2,14]},{24:[2,15]},{14:33,31:r},{24:[2,19]},{24:[2,23]},{24:[2,24]},{14:34,31:r},{14:35,31:r},{20:[1,36],31:[2,12]},i(n,[2,16]),i(n,[2,10]),i(n,[2,11]),{17:37,24:s},{31:[2,13]}],defaultActions:{3:[2,1],24:[2,14],25:[2,15],27:[2,19],28:[2,23],29:[2,24],37:[2,13]},parseError:function(t,e){if(!e.recoverable)throw new Error(t);this.trace(t)},parse:function(t){function e(){var t;return"number"!=typeof(t=d.lex()||p)&&(t=i.symbols_[t]||t),t}var i=this,n=[0],s=[null],r=[],a=this.table,o="",h=0,c=0,l=0,u=2,p=1,y=r.slice.call(arguments,1),d=Object.create(this.lexer),f={yy:{}};for(var g in this.yy)Object.prototype.hasOwnProperty.call(this.yy,g)&&(f.yy[g]=this.yy[g]);d.setInput(t,f.yy),f.yy.lexer=d,f.yy.parser=this,void 0===d.yylloc&&(d.yylloc={});var m=d.yylloc;r.push(m);var _=d.options&&d.options.ranges;"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var x,w,k,v,b,E,S,A,T,O={};;){if(k=n[n.length-1],this.defaultActions[k]?v=this.defaultActions[k]:(null!=x||(x=e()),v=a[k]&&a[k][x]),void 0===v||!v.length||!v[0]){var L="";for(E in T=[],a[k])this.terminals_[E]&&E>u&&T.push("'"+this.terminals_[E]+"'");L=d.showPosition?"Parse error on line "+(h+1)+":\n"+d.showPosition()+"\nExpecting "+T.join(", ")+", got '"+(this.terminals_[x]||x)+"'":"Parse error on line "+(h+1)+": Unexpected "+(x==p?"end of input":"'"+(this.terminals_[x]||x)+"'"),this.parseError(L,{text:d.match,token:this.terminals_[x]||x,line:d.yylineno,loc:m,expected:T})}if(v[0]instanceof Array&&v.length>1)throw new Error("Parse Error: multiple actions possible at state: "+k+", token: "+x);switch(v[0]){case 1:n.push(x),s.push(d.yytext),r.push(d.yylloc),n.push(v[1]),x=null,w?(x=w,w=null):(c=d.yyleng,o=d.yytext,h=d.yylineno,m=d.yylloc,l>0&&l--);break;case 2:if(S=this.productions_[v[1]][1],O.$=s[s.length-S],O._$={first_line:r[r.length-(S||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(S||1)].first_column,last_column:r[r.length-1].last_column},_&&(O._$.range=[r[r.length-(S||1)].range[0],r[r.length-1].range[1]]),void 0!==(b=this.performAction.apply(O,[o,c,h,f.yy,v[1],s,r].concat(y))))return b;S&&(n=n.slice(0,-1*S*2),s=s.slice(0,-1*S),r=r.slice(0,-1*S)),n.push(this.productions_[v[1]][0]),s.push(O.$),r.push(O._$),A=a[n[n.length-2]][n[n.length-1]],n.push(A);break;case 3:return!0}}return!0}},h={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,i=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===n.length?this.yylloc.first_column:0)+n[n.length-i.length].length-i[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var i,n,s;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),(n=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],i=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),i)return i;if(this._backtrack){for(var r in s)this[r]=s[r];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,i,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),r=0;r<s.length;r++)if((i=this._input.match(this.rules[s[r]]))&&(!e||i[0].length>e[0].length)){if(e=i,n=r,this.options.backtrack_lexer){if(!1!==(t=this.test_match(i,s[r])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,s[n]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(t,e,i,n){switch(i){case 0:return 8;case 1:case 2:break;case 3:return 9;case 4:return 21;case 5:return 22;case 6:return 18;case 7:return 15;case 8:return 13;case 9:return 20;case 10:case 11:return 24;case 12:return 28;case 13:return 27;case 14:return 30;case 15:return 29;case 16:return 31;case 17:return 5;case 18:return"INVALID"}},rules:[/^(?:[\r\n]+)/i,/^(?:\s+)/i,/^(?:#[^\r\n]*)/i,/^(?:participant\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:title\b)/i,/^(?:,)/i,/^(?:[^\->:,\r\n"]+)/i,/^(?:"[^"]+")/i,/^(?:--)/i,/^(?:-)/i,/^(?:>>)/i,/^(?:>)/i,/^(?:[^\r\n]+)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18],inclusive:!0}}};return o.lexer=h,e.prototype=o,o.Parser=e,new e}();function i(t,e){_.extend(this,e),this.name="ParseError",this.message=t||""}"undefined"!=typeof require&&"undefined"!=typeof exports&&(exports.parser=e,exports.Parser=e.Parser,exports.parse=function(){return e.parse.apply(e,arguments)},exports.main=function(t){t[1]||(console.log("Usage: "+t[0]+" FILE"),process.exit(1));var e=require("fs").readFileSync(require("path").normalize(t[1]),"utf8");return exports.parser.parse(e)},"undefined"!=typeof module&&require.main===module&&exports.main(process.argv.slice(1))),i.prototype=new Error,t.ParseError=i,t.parse=function(n){e.yy=new t,e.yy.parseError=function(t,e){throw new i(t,e)};var s=e.parse(n);return delete s.parseError,s};var n=20,s=t.PLACEMENT,r=t.LINETYPE,a=t.ARROWTYPE;function o(t){this.message=t}function h(t,e){if(!t)throw new o(e)}function c(e,i){t.themes[e]=i}function l(t){return t.x+t.width/2}function u(t,e,i){return t<e?e:t>i?i:t}function p(t,e,i,n){h(_.all([t,i,e,n],_.isFinite),"x1,x2,y1,y2 must be numeric");var s=Math.sqrt((i-t)*(i-t)+(n-e)*(n-e))/25,r=u(Math.random(),.2,.8),a=u(Math.random(),.2,.8),o=Math.random()>.5?s:-s,c=Math.random()>.5?s:-s,l={x:(i-t)*r+t+o,y:(n-e)*r+e+c},p={x:(i-t)*a+t-o,y:(n-e)*a+e-c};return"C"+l.x.toFixed(1)+","+l.y.toFixed(1)+" "+p.x.toFixed(1)+","+p.y.toFixed(1)+" "+i.toFixed(1)+","+n.toFixed(1)}o.prototype.toString=function(){return"AssertException: "+this.message},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),t.themes={};var y,d=function(t,e){this.init(t,e)};if(_.extend(d.prototype,{init:function(t,e){this.diagram=t,this.actorsHeight_=0,this.signalsHeight_=0,this.title_=void 0},setupPaper:function(t){},draw:function(t){this.setupPaper(t),this.layout();var e=10+(this.title_?this.title_.height:0);this.drawTitle(),this.drawActors(e),this.drawSignals(e+this.actorsHeight_)},layout:function(){var t=this.diagram,e=this.font_,i=t.actors,r=t.signals;if(t.width=0,t.height=0,t.title){var a=this.title_={},o=this.textBBox(t.title,e);a.textBB=o,a.message=t.title,a.width=o.width+10,a.height=o.height+10,a.x=10,a.y=10,t.width+=a.width,t.height+=a.height}function c(t,e,n){h(t<e,"a must be less than or equal to b"),t<0?(e=i[e]).x=Math.max(n-e.width/2,e.x):e>=i.length?(t=i[t]).paddingRight=Math.max(n,t.paddingRight):(t=i[t]).distances[e]=Math.max(n,t.distances[e]?t.distances[e]:0)}_.each(i,(function(t){var i=this.textBBox(t.name,e);t.textBB=i,t.x=0,t.y=0,t.width=i.width+40,t.height=i.height+40,t.distances=[],t.paddingRight=0,this.actorsHeight_=Math.max(t.height,this.actorsHeight_)}),this),_.each(r,(function(t){var i,r,a=this.textBBox(t.message,e);t.textBB=a,t.width=a.width,t.height=a.height;var o=0;if("Signal"==t.type)t.width+=20,t.height+=20,t.isSelf()?(r=(i=t.actorA.index)+1,t.width+=n):(i=Math.min(t.actorA.index,t.actorB.index),r=Math.max(t.actorA.index,t.actorB.index));else{if("Note"!=t.type)throw new Error("Unhandled signal type:"+t.type);if(t.width+=30,t.height+=30,o=20,t.placement==s.LEFTOF)i=(r=t.actor.index)-1;else if(t.placement==s.RIGHTOF)r=(i=t.actor.index)+1;else if(t.placement==s.OVER&&t.hasManyActors())i=Math.min(t.actor[0].index,t.actor[1].index),r=Math.max(t.actor[0].index,t.actor[1].index),o=-40;else if(t.placement==s.OVER)return c((i=t.actor.index)-1,i,t.width/2),c(i,i+1,t.width/2),void(this.signalsHeight_+=t.height)}c(i,r,t.width+o),this.signalsHeight_+=t.height}),this);var l=0;return _.each(i,(function(t){t.x=Math.max(l,t.x),_.each(t.distances,(function(e,n){void 0!==e&&(n=i[n],e=Math.max(e,t.width/2,n.width/2),n.x=Math.max(n.x,t.x+t.width/2+e-n.width/2))})),l=t.x+t.width+t.paddingRight}),this),t.width=Math.max(l,t.width),t.width+=20,t.height+=20+2*this.actorsHeight_+this.signalsHeight_,this},textBBox:function(t,e){},drawTitle:function(){var t=this.title_;t&&this.drawTextBox(t,t.message,0,5,this.font_,0)},drawActors:function(t){var e=t;_.each(this.diagram.actors,(function(t){this.drawActor(t,e,this.actorsHeight_),this.drawActor(t,e+this.actorsHeight_+this.signalsHeight_,this.actorsHeight_);var i=l(t);this.drawLine(i,e+this.actorsHeight_-10,i,e+this.actorsHeight_+10+this.signalsHeight_)}),this)},drawActor:function(t,e,i){t.y=e,t.height=i,this.drawTextBox(t,t.name,10,10,this.font_,1)},drawSignals:function(t){var e=t;_.each(this.diagram.signals,(function(t){"Signal"==t.type?t.isSelf()?this.drawSelfSignal(t,e):this.drawSignal(t,e):"Note"==t.type&&this.drawNote(t,e),e+=t.height}),this)},drawSelfSignal:function(t,e){h(t.isSelf(),"signal must be a self signal");var i=t.textBB,s=l(t.actorA),r=s+n+5,a=e+5+t.height/2+i.y;this.drawText(r,a,t.message,this.font_,0);var o=e+5+5,c=o+t.height-10-5;this.drawLine(s,o,s+n,o,t.linetype),this.drawLine(s+n,o,s+n,c,t.linetype),this.drawLine(s+n,c,s,c,t.linetype,t.arrowtype)},drawSignal:function(t,e){var i=l(t.actorA),n=l(t.actorB),s=(n-i)/2+i,r=e+5+10;this.drawText(s,r,t.message,this.font_,1),r=e+t.height-5-5,this.drawLine(i,r,n,r,t.linetype,t.arrowtype)},drawNote:function(t,e){t.y=e;var i=l(t.hasManyActors()?t.actor[0]:t.actor);switch(t.placement){case s.RIGHTOF:t.x=i+10;break;case s.LEFTOF:t.x=i-10-t.width;break;case s.OVER:if(t.hasManyActors()){var n=l(t.actor[1]);t.x=Math.min(i,n)-20,t.width=Math.max(i,n)+20-t.x}else t.x=i-t.width/2;break;default:throw new Error("Unhandled note placement: "+t.placement)}return this.drawTextBox(t,t.message,10,5,this.font_,0)},drawTextBox:function(t,e,i,n,s,r){var a=t.x+i,o=t.y+i,h=t.width-2*i,c=t.height-2*i;return this.drawRect(a,o,h,c),1==r?(a=l(t),o=function(t){return t.y+t.height/2}(t)):(a+=n,o+=n),this.drawText(a,o,e,s,r)}}),"undefined"!=typeof Snap){var f="http://www.w3.org/2000/svg",g={stroke:"#000000","stroke-width":2,fill:"none"},m={stroke:"#000000","stroke-width":2,fill:"#fff"},x={},w=function(t,e,i){_.defaults(e,{"css-class":"simple","font-size":16,"font-family":"Andale Mono, monospace"}),this.init(t,e,i)};_.extend(w.prototype,d.prototype,{init:function(t,e,i){d.prototype.init.call(this,t),this.paper_=void 0,this.cssClass_=e["css-class"]||void 0,this.font_={"font-size":e["font-size"],"font-family":e["font-family"]};var n=this.arrowTypes_={};n[a.FILLED]="Block",n[a.OPEN]="Open";var s=this.lineTypes_={};s[r.SOLID]="",s[r.DOTTED]="6,2";var o=this;this.waitForFont((function(){i(o)}))},waitForFont:function(t){var e=this.font_["font-family"];if("undefined"==typeof WebFont)throw new Error("WebFont is required (https://github.com/typekit/webfontloader).");x[e]?t():WebFont.load({custom:{families:[e]},classes:!1,active:function(){x[e]=!0,t()},inactive:function(){x[e]=!0,t()}})},addDescription:function(t,e){var i=document.createElementNS(f,"desc");i.appendChild(document.createTextNode(e)),t.appendChild(i)},setupPaper:function(t){var e=document.createElementNS(f,"svg");t.appendChild(e),this.addDescription(e,this.diagram.title||""),this.paper_=Snap(e),this.paper_.addClass("sequence"),this.cssClass_&&this.paper_.addClass(this.cssClass_),this.beginGroup();var i=this.arrowMarkers_={},n=this.paper_.path("M 0 0 L 5 2.5 L 0 5 z");i[a.FILLED]=n.marker(0,0,5,5,5,2.5).attr({id:"markerArrowBlock"}),n=this.paper_.path("M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z"),i[a.OPEN]=n.marker(0,0,9.6,16,9.6,8).attr({markerWidth:"4",id:"markerArrowOpen"})},layout:function(){d.prototype.layout.call(this),this.paper_.attr({width:this.diagram.width+"px",height:this.diagram.height+"px"})},textBBox:function(t,e){var i=this.createText(t,e),n=i.getBBox();return i.remove(),n},pushToStack:function(t){return this._stack.push(t),t},beginGroup:function(){this._stack=[]},finishGroup:function(){var t=this.paper_.group.apply(this.paper_,this._stack);return this.beginGroup(),t},createText:function(t,e){t=_.invoke(t.split("\n"),"trim");var i=this.paper_.text(0,0,t);return i.attr(e||{}),t.length>1&&i.selectAll("tspan:nth-child(n+2)").attr({dy:"1.2em",x:0}),i},drawLine:function(t,e,i,n,s,r){var a=this.paper_.line(t,e,i,n).attr(g);return void 0!==s&&a.attr("strokeDasharray",this.lineTypes_[s]),void 0!==r&&a.attr("markerEnd",this.arrowMarkers_[r]),this.pushToStack(a)},drawRect:function(t,e,i,n){var s=this.paper_.rect(t,e,i,n).attr(m);return this.pushToStack(s)},drawText:function(t,e,i,n,s){var r=this.createText(i,n),a=r.getBBox();return 1==s&&(t-=a.width/2,e-=a.height/2),r.attr({x:t-a.x,y:e-a.y}),r.selectAll("tspan").attr({x:t}),this.pushToStack(r),r},drawTitle:function(){return this.beginGroup(),d.prototype.drawTitle.call(this),this.finishGroup().addClass("title")},drawActor:function(t,e,i){return this.beginGroup(),d.prototype.drawActor.call(this,t,e,i),this.finishGroup().addClass("actor")},drawSignal:function(t,e){return this.beginGroup(),d.prototype.drawSignal.call(this,t,e),this.finishGroup().addClass("signal")},drawSelfSignal:function(t,e){return this.beginGroup(),d.prototype.drawSelfSignal.call(this,t,e),this.finishGroup().addClass("signal")},drawNote:function(t,e){return this.beginGroup(),d.prototype.drawNote.call(this,t,e),this.finishGroup().addClass("note")}});var k=function(t,e,i){_.defaults(e,{"css-class":"hand","font-size":16,"font-family":"danielbd"}),this.init(t,e,i)};_.extend(k.prototype,w.prototype,{drawLine:function(t,e,i,n,s,r){var a=this.paper_.path(function(t,e,i,n){return h(_.all([t,i,e,n],_.isFinite),"x1,x2,y1,y2 must be numeric"),"M"+t.toFixed(1)+","+e.toFixed(1)+p(t,e,i,n)}(t,e,i,n)).attr(g);return void 0!==s&&a.attr("strokeDasharray",this.lineTypes_[s]),void 0!==r&&a.attr("markerEnd",this.arrowMarkers_[r]),this.pushToStack(a)},drawRect:function(t,e,i,n){var s=this.paper_.path(function(t,e,i,n){return h(_.all([t,e,i,n],_.isFinite),"x, y, w, h must be numeric"),"M"+t+","+e+p(t,e,t+i,e)+p(t+i,e,t+i,e+n)+p(t+i,e+n,t,e+n)+p(t,e+n,t,e)}(t,e,i,n)).attr(m);return this.pushToStack(s)}}),c("snapSimple",w),c("snapHand",k)}if("undefined"==typeof Raphael&&"undefined"==typeof Snap)throw new Error("Raphael or Snap.svg is required to be included.");if(_.isEmpty(t.themes))throw new Error("No themes were registered. Please call registerTheme(...).");t.themes.hand=t.themes.snapHand||t.themes.raphaelHand,t.themes.simple=t.themes.snapSimple||t.themes.raphaelSimple,t.prototype.drawSVG=function(e,i){if(!((i=_.defaults(i||{},{theme:"hand"})).theme in t.themes))throw new Error("Unsupported theme: "+i.theme);var n=_.isString(e)?document.getElementById(e):e;if(null===n||!n.tagName)throw new Error("Invalid container: "+e);new(0,t.themes[i.theme])(this,i,(function(t){t.draw(n)}))},"undefined"!=typeof jQuery&&((y=jQuery).fn.sequenceDiagram=function(e){return this.each((function(){var i=y(this),n=t.parse(i.text());i.html(""),n.drawSVG(this,e)}))});var v="object"==typeof self&&self.self==self&&self||"object"==typeof global&&global.global==global&&global;"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports.Diagram=t):v.Diagram=t}();
//# sourceMappingURL=sequence-diagram-snap.js.map